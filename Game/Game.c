
#include "game.h"
#include "random.h"

unsigned char g_spriteIdle[MAX_DANCE][50] = {
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x55, 0x00, 0x50, 0x05, 0x00, 0xff, 0x00, 0x50, 0x0a, 0x55, 0x55, 0x55, 0xa0, 0x0a, 0xaa, 0x55, 0xaa, 0xa0, 0x00, 0xa0, 0x55, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x00, 0x05, 0x00, 0x55, 0x00, 0x50, 0x05, 0x55, 0xff, 0x55, 0x50, 0x0a, 0xa5, 0x55, 0x5a, 0xa0, 0x0a, 0x05, 0x55, 0x50, 0xa0, 0x00, 0x00, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x00, 0x05, 0x00, 0x55, 0x00, 0x50, 0x05, 0x55, 0xff, 0x55, 0x50, 0x0a, 0xa5, 0x55, 0x5a, 0xa0, 0x0a, 0x05, 0x55, 0x50, 0xa0, 0x00, 0x00, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x55, 0x00, 0x50, 0x05, 0x00, 0xff, 0x00, 0x50, 0x0a, 0x55, 0x55, 0x55, 0xa0, 0x0a, 0xaa, 0x55, 0xaa, 0xa0, 0x00, 0xa0, 0x55, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x00, 0x05, 0x00, 0x55, 0x00, 0x50, 0x05, 0x55, 0xff, 0x55, 0x50, 0x00, 0xa5, 0x55, 0x5a, 0x00, 0x0a, 0xa0, 0x55, 0x0a, 0xa0, 0x0a, 0x00, 0x55, 0x00, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x00, 0x05, 0x00, 0x55, 0x00, 0x50, 0x05, 0x55, 0xff, 0x55, 0x50, 0x00, 0xa5, 0x55, 0x5a, 0x00, 0x0a, 0xa0, 0x55, 0x0a, 0xa0, 0x0a, 0x00, 0x55, 0x00, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
};

unsigned char g_spriteAttack[7][50] = {
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x00, 0x05, 0x00, 0x55, 0x00, 0x50, 0x05, 0x55, 0xff, 0x55, 0x50, 0x00, 0xa5, 0x55, 0x5a, 0x00, 0x0a, 0xa0, 0x55, 0x0a, 0xa0, 0x0a, 0x00, 0x55, 0x00, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x50, 0x00, 0x00, 0x55, 0x5f, 0x55, 0x00, 0x00, 0x00, 0x55, 0x5f, 0x55, 0x0a, 0xaa, 0x55, 0x55, 0x05, 0x0a, 0xa0, 0x55, 0x5a, 0x00, 0x00, 0x00, 0x05, 0x5a, 0xa0, 0x00, 0x00, 0x00, 0x00, 0xa0, 0x00, 0x00, 0x00, 0x00, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x05, 0x00, 0x00, 0x00, 0x55, 0xf5, 0x00, 0x0a, 0xaa, 0x55, 0x5f, 0x05, 0x0a, 0x00, 0x55, 0x55, 0x55, 0x00, 0x00, 0x05, 0x55, 0x00, 0x00, 0x00, 0x00, 0x0a, 0xa0, 0x00, 0x00, 0x00, 0x00, 0xa0, 0x00, 0x00, 0x00, 0x00, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x50, 0x00, 0x00, 0x05, 0x55, 0x05, 0x00, 0x0a, 0xa0, 0x5f, 0x50, 0x00, 0x00, 0x05, 0x55, 0x50, 0x00, 0x00, 0x05, 0x50, 0x55, 0x50, 0x00, 0x00, 0x0a, 0x05, 0x00, 0x00, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x05, 0x50, 0x00, 0x0a, 0xaa, 0x05, 0x00, 0x00, 0x00, 0x0a, 0x55, 0x55, 0x50, 0x00, 0x00, 0x5f, 0x55, 0x00, 0x00, 0x05, 0x55, 0xf5, 0x50, 0x00, 0x00, 0x55, 0x55, 0x00, 0x00, 0x00, 0xa0, 0x50, 0x00, 0x00, 0x0a, 0xa0, 0x05, 0x50, 0x00, 0x0a, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x55, 0x00, 0x00, 0x0a, 0xa0, 0x50, 0x00, 0x00, 0x00, 0xa0, 0x55, 0x50, 0x50, 0x00, 0x05, 0xf5, 0x55, 0x00, 0x00, 0x55, 0x5f, 0x55, 0x50, 0x00, 0x05, 0x55, 0x55, 0x00, 0x00, 0x0a, 0x00, 0x50, 0x00, 0x00, 0xaa, 0x00, 0x05, 0x50, 0x00, 0xaa, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xaa, 0x05, 0x50, 0x00, 0x00, 0x0a, 0xa5, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x00, 0x00, 0x55, 0x5f, 0x55, 0x00, 0x00, 0x55, 0x5f, 0x55, 0x00, 0x00, 0x00, 0x55, 0x00, 0x00, 0x00, 0x0a, 0xa5, 0x00, 0x00, 0x00, 0xaa, 0x05, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
};

unsigned char g_explosion[MAX_EXPLOSION][196] = {
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5f, 0x5f, 0x50, 0x00, 0x00, 0x05, 0x5a, 0x55, 0x5f, 0x55, 0xa5, 0x00, 0x05, 0xf5, 0x5f, 0xf5, 0xf5, 0x5f, 0x00, 0x55, 0xf5, 0xf5, 0xf5, 0xf5, 0xf5, 0x50, 0x00, 0x05, 0x5f, 0xff, 0xf5, 0x55, 0x55, 0x00, 0x5f, 0x55, 0xff, 0x5f, 0x55, 0x00, 0x00, 0x55, 0x55, 0x5f, 0x55, 0xff, 0x00, 0x00, 0x55, 0x50, 0x55, 0xaa, 0x55, 0x00, 0x00, 0x05, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x07, 0x0f, 0x70, 0x00, 0x00, 0x00, 0x07, 0x77, 0x70, 0xff, 0x00, 0x00, 0x00, 0x0f, 0xf7, 0x77, 0x00, 0x00, 0x00, 0x00, 0x07, 0x77, 0x70, 0xf0, 0x00, 0x00, 0x00, 0xf7, 0x0f, 0xf0, 0xf0, 0x00, 0x00, 0x00, 0x00, 0xff, 0x70, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x05, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0xa0, 0x05, 0x00, 0x00, 0x00, 0x0a, 0x05, 0x05, 0x55, 0x55, 0x00, 0x00, 0x00, 0x00, 0x55, 0x5f, 0x00, 0x0a, 0x00, 0x00, 0x05, 0x55, 0xfa, 0x0a, 0xa0, 0x00, 0x0a, 0x55, 0xaf, 0xff, 0x50, 0x00, 0x00, 0x00, 0x50, 0x50, 0x05, 0x00, 0x50, 0x00, 0x05, 0xa5, 0x00, 0xa0, 0xa0, 0x00, 0x00, 0x00, 0x00, 0xa0, 0x50, 0xa0, 0x00, 0x00, 0x0a, 0x00, 0xa0, 0x05, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0xa0, 0xa0, 0x00, 0x00, 0xa0, 0x00, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x50, 0x00, 0x00, 0x05, 0x00, 0x05, 0x00, 0x00, 0x00, 0x0a, 0x55, 0x50, 0x0f, 0xa0, 0x00, 0xa0, 0x00, 0x05, 0x55, 0xff, 0xf0, 0x0a, 0x00, 0xa5, 0x55, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x05, 0x5f, 0xff, 0x55, 0x00, 0x00, 0x00, 0xa0, 0x55, 0x0f, 0x00, 0x05, 0x00, 0x05, 0x00, 0x50, 0x00, 0x00, 0x0a, 0x00, 0x50, 0x05, 0x00, 0x05, 0x05, 0x00, 0x00, 0x00, 0x50, 0x00, 0x05, 0x0a, 0x50, 0x00, 0x0a, 0xa0, 0x00, 0xa0, 0x00, 0x0a, 0x00, 0xa0, 0x00, 0xa0, 0x00, 0x00, 0x00, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
};

EnemyR g_enemies[MAX_ENEMIES];


void Timer0A_Handler(void) {
	int i;
	for (i = 0; i < MAX_ENEMIES; i++) {
		if (g_enemies[i].stat == ALIVE) {
			/*g_enemies[i].xpos = g_enemies[i].xpos + 2*(RandomExtract()%3-1);
			if (g_enemies[i].xpos > g_enemies[i].xpos0 + 4) {
				g_enemies[i].xpos = g_enemies[i].xpos0 + 4;
			}
			if (g_enemies[i].xpos < g_enemies[i].xpos0 - 4) {
				g_enemies[i].xpos = g_enemies[i].xpos0 - 4;
			}*/
			g_enemies[i].direction += 15;
			if (g_enemies[i].direction > 360) {
				g_enemies[i].direction = g_enemies[i].direction%360;
			}
		}
	}
}

void GameInit(void) {
	int x,y;
	for (y = 0; y < 3; y++) {
		for (x = 0; x < 4; x++) {
			g_enemies[y*4+x].xpos0 = x*20+24;
			g_enemies[y*4+x].ypos0 = y*12+8;
			g_enemies[y*4+x].xpos = x*20+24;
			g_enemies[y*4+x].ypos = y*12+8;
			g_enemies[y*4+x].width = 10;
			g_enemies[y*4+x].height = 10;
			g_enemies[y*4+x].direction = 0;
			g_enemies[y*4+x].animationStep = 0;
			g_enemies[y*4+x].health = 1;
			g_enemies[y*4+x].stat = ALIVE;
		}
	}
}

