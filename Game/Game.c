
#include "inc/lm3s1968.h"
#include "inc/hw_types.h"
#include "drivers/rit128x96x4.h"

#include "graphics.h"
#include "game.h"
#include "random.h"
#include "globals.h"
#include "timer.h"
#include "sound.h"

unsigned char g_enemySpritesIdle[MAX_DANCE][50] = {
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x55, 0x00, 0x50, 0x05, 0x00, 0xff, 0x00, 0x50, 0x0a, 0x55, 0x55, 0x55, 0xa0, 0x0a, 0xaa, 0x55, 0xaa, 0xa0, 0x00, 0xa0, 0x55, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x00, 0x05, 0x00, 0x55, 0x00, 0x50, 0x05, 0x55, 0xff, 0x55, 0x50, 0x0a, 0xa5, 0x55, 0x5a, 0xa0, 0x0a, 0x05, 0x55, 0x50, 0xa0, 0x00, 0x00, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x00, 0x05, 0x00, 0x55, 0x00, 0x50, 0x05, 0x55, 0xff, 0x55, 0x50, 0x0a, 0xa5, 0x55, 0x5a, 0xa0, 0x0a, 0x05, 0x55, 0x50, 0xa0, 0x00, 0x00, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x55, 0x00, 0x50, 0x05, 0x00, 0xff, 0x00, 0x50, 0x0a, 0x55, 0x55, 0x55, 0xa0, 0x0a, 0xaa, 0x55, 0xaa, 0xa0, 0x00, 0xa0, 0x55, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x00, 0x05, 0x00, 0x55, 0x00, 0x50, 0x05, 0x55, 0xff, 0x55, 0x50, 0x00, 0xa5, 0x55, 0x5a, 0x00, 0x0a, 0xa0, 0x55, 0x0a, 0xa0, 0x0a, 0x00, 0x55, 0x00, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x00, 0x05, 0x00, 0x55, 0x00, 0x50, 0x05, 0x55, 0xff, 0x55, 0x50, 0x00, 0xa5, 0x55, 0x5a, 0x00, 0x0a, 0xa0, 0x55, 0x0a, 0xa0, 0x0a, 0x00, 0x55, 0x00, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
};

unsigned char g_explosionSprites[MAX_EXPLOSION][196] = {
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x5f, 0x5f, 0x50, 0x00, 0x00, 0x05, 0x5a, 0x55, 0x5f, 0x55, 0xa5, 0x00, 0x05, 0xf5, 0x5f, 0xf5, 0xf5, 0x5f, 0x00, 0x55, 0xf5, 0xf5, 0xf5, 0xf5, 0xf5, 0x50, 0x00, 0x05, 0x5f, 0xff, 0xf5, 0x55, 0x55, 0x00, 0x5f, 0x55, 0xff, 0x5f, 0x55, 0x00, 0x00, 0x55, 0x55, 0x5f, 0x55, 0xff, 0x00, 0x00, 0x55, 0x50, 0x55, 0xaa, 0x55, 0x00, 0x00, 0x05, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x07, 0x0f, 0x70, 0x00, 0x00, 0x00, 0x07, 0x77, 0x70, 0xff, 0x00, 0x00, 0x00, 0x0f, 0xf7, 0x77, 0x00, 0x00, 0x00, 0x00, 0x07, 0x77, 0x70, 0xf0, 0x00, 0x00, 0x00, 0xf7, 0x0f, 0xf0, 0xf0, 0x00, 0x00, 0x00, 0x00, 0xff, 0x70, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x05, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0xa0, 0x05, 0x00, 0x00, 0x00, 0x0a, 0x05, 0x05, 0x55, 0x55, 0x00, 0x00, 0x00, 0x00, 0x55, 0x5f, 0x00, 0x0a, 0x00, 0x00, 0x05, 0x55, 0xfa, 0x0a, 0xa0, 0x00, 0x0a, 0x55, 0xaf, 0xff, 0x50, 0x00, 0x00, 0x00, 0x50, 0x50, 0x05, 0x00, 0x50, 0x00, 0x05, 0xa5, 0x00, 0xa0, 0xa0, 0x00, 0x00, 0x00, 0x00, 0xa0, 0x50, 0xa0, 0x00, 0x00, 0x0a, 0x00, 0xa0, 0x05, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0xa0, 0xa0, 0x00, 0x00, 0xa0, 0x00, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x50, 0x00, 0x00, 0x05, 0x00, 0x05, 0x00, 0x00, 0x00, 0x0a, 0x55, 0x50, 0x0f, 0xa0, 0x00, 0xa0, 0x00, 0x05, 0x55, 0xff, 0xf0, 0x0a, 0x00, 0xa5, 0x55, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x05, 0x5f, 0xff, 0x55, 0x00, 0x00, 0x00, 0xa0, 0x55, 0x0f, 0x00, 0x05, 0x00, 0x05, 0x00, 0x50, 0x00, 0x00, 0x0a, 0x00, 0x50, 0x05, 0x00, 0x05, 0x05, 0x00, 0x00, 0x00, 0x50, 0x00, 0x05, 0x0a, 0x50, 0x00, 0x0a, 0xa0, 0x00, 0xa0, 0x00, 0x0a, 0x00, 0xa0, 0x00, 0xa0, 0x00, 0x00, 0x00, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
};

unsigned char g_playerSprites[2][168] = {
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x50, 0x00, 0x00, 0x00, 0x05, 0x05, 0x05, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 0xa5, 0xa0, 0x00, 0x00, 0x0f, 0x00, 0xa5, 0xa0, 0x0f, 0x00, 0x0f, 0x0a, 0xa5, 0xaa, 0x0f, 0x00, 0x0f, 0xaa, 0xa5, 0xaa, 0xaf, 0x00, 0x0f, 0x0a, 0xa0, 0xaa, 0x0f, 0x00, 0x0f, 0x00, 0xa0, 0xa0, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x50, 0x00, 0x00, 0x00, 0x05, 0x55, 0x55, 0x00, 0x00, 0x00, 0x05, 0x05, 0x05, 0x00, 0x00, 0x00, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x0a, 0x00, 0x0f, 0x00, 0xff, 0xf0, 0xaa, 0xa0, 0xff, 0xf0, 0xfa, 0xfa, 0xaa, 0xaa, 0xfa, 0xf0, 0xfa, 0xfa, 0x0a, 0x0a, 0xfa, 0xf0, 0xfa, 0xf0, 0x0a, 0x00, 0xfa, 0xf0, 0xfa, 0xf0, 0x00, 0x00, 0xfa, 0xf0, 0xff, 0xf0, 0x00, 0x00, 0xff, 0xf0, 0x0f, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
};

unsigned char g_playerExplosionSprites[MAX_EXPLOSION][728] = {
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x50, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x55, 0xa0, 0xff, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x50, 0xff, 0x00, 0xaf, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0xfa, 0x00, 0x00, 0x00, 0x00, 0xf5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfa, 0x00, 0x05, 0x00, 0x0a, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xa0, 0x00, 0x55, 0x50, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x05, 0x55, 0x55, 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x50, 0x00, 0x05, 0x05, 0x05, 0x00, 0x0f, 0x05, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x5f, 0xf0, 0x05, 0x00, 0x05, 0x00, 0x05, 0x00, 0xf0, 0x05, 0x00, 0x00, 0x05, 0x00, 0x00, 0x55, 0x50, 0x55, 0x50, 0x55, 0x50, 0xf0, 0x50, 0x00, 0x00, 0x05, 0xf0, 0x00, 0x55, 0x55, 0x55, 0x55, 0x55, 0x50, 0x00, 0x50, 0x00, 0x00, 0x50, 0xf0, 0x00, 0x55, 0x55, 0x05, 0x05, 0x55, 0x50, 0x05, 0x00, 0x00, 0x05, 0x0f, 0xa0, 0x00, 0x55, 0x50, 0x05, 0x00, 0x55, 0x50, 0x50, 0x00, 0x00, 0x00, 0x50, 0xf0, 0x00, 0x55, 0x50, 0x00, 0x00, 0x55, 0x50, 0x05, 0x00, 0x00, 0x00, 0x05, 0x0f, 0x00, 0x55, 0x50, 0x00, 0x00, 0x55, 0x50, 0x00, 0x50, 0x00, 0x00, 0x00, 0x05, 0x50, 0x05, 0x0f, 0xf0, 0x00, 0x05, 0x0f, 0xf5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0xa0, 0x05, 0x5a, 0x00, 0x00, 0x0f, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x0f, 0xaf, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfa, 0xaf, 0xf5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x50, 0x05, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0xff, 0xa0, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00, 0x00, 0xfa, 0x00, 0x00, 0x05, 0x50, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x0a, 0x00, 0x00, 0x50, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xaa, 0xa5, 0x00, 0xa0, 0x55, 0x00, 0x0f, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x5a, 0x00, 0xa0, 0x00, 0x55, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x50, 0xa0, 0x00, 0x00, 0x00, 0x50, 0x00, 0x00, 0xa0, 0x0f, 0x00, 0x00, 0x00, 0x05, 0xa0, 0x00, 0x00, 0x55, 0x00, 0x00, 0x0a, 0xaf, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x50, 0x00, 0x00, 0x05, 0x0a, 0x50, 0x5a, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x55, 0x00, 0x00, 0x00, 0x00, 0xaa, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x50, 0x05, 0x00, 0x00, 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x0a, 0xaa, 0x05, 0x50, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0xaa, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0xaa, 0xff, 0x00, 0x00, 0x0a, 0x0a, 0x05, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x5a, 0xaf, 0xf0, 0x00, 0x00, 0x50, 0xa0, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x05, 0xff, 0x00, 0x00, 0x05, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x50, 0x00, 0x05, 0x0f, 0x55, 0x00, 0x05, 0xf0, 0x00, 0x00, 0x00, 0x0f, 0xaa, 0xa0, 0x05, 0x0a, 0xff, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0xfa, 0x00, 0x00, 0x00, 0x0a, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xf0, 0x0f, 0xaa, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x0f, 0xf0, 0x00, 0x00, 0x50, 0x05, 0xf5, 0x50, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0xff, 0x00, 0x05, 0xf5, 0x5a, 0x5a, 0xf5, 0x50, 0x0f, 0xf0, 0x00, 0x00, 0x00, 0x0f, 0xff, 0x5a, 0xa5, 0xa5, 0xf5, 0xfa, 0x55, 0xaf, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0xa5, 0x55, 0x5f, 0xa5, 0x5a, 0xaa, 0xaa, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x5a, 0x50, 0x55, 0xf5, 0x55, 0x55, 0x50, 0x55, 0xa0, 0x0f, 0xf0, 0x00, 0x05, 0xaf, 0xf5, 0x50, 0x5a, 0x00, 0xf0, 0xf5, 0x55, 0xa5, 0xa0, 0x0f, 0x00, 0x00, 0x55, 0x5f, 0x05, 0xaa, 0x00, 0xff, 0xaf, 0x5a, 0x5a, 0x00, 0x00, 0xf0, 0x05, 0xaa, 0xa5, 0x5a, 0xaa, 0x0a, 0xfa, 0x55, 0x5a, 0x5a, 0x00, 0x00, 0x55, 0x5a, 0x55, 0x50, 0xaa, 0xaa, 0x0a, 0xaa, 0x55, 0x5a, 0x50, 0x00, 0x00, 0x55, 0xa5, 0x5f, 0xa0, 0x0a, 0xaa, 0xaa, 0xf5, 0x55, 0xa5, 0x50, 0x00, 0x00, 0x0a, 0x5f, 0xf0, 0xaa, 0x00, 0xaa, 0x0a, 0x5f, 0xfa, 0x55, 0x00, 0x00, 0x00, 0x0a, 0x5f, 0x55, 0x00, 0x0a, 0xaa, 0x00, 0xa5, 0xff, 0x50, 0x00, 0x00, 0x00, 0x5a, 0x55, 0xfa, 0xa0, 0x0a, 0x00, 0x00, 0x55, 0x0a, 0x55, 0x00, 0x00, 0x00, 0x05, 0xa5, 0x55, 0x55, 0xaa, 0xaa, 0xa0, 0xa0, 0x55, 0xa5, 0x50, 0x00, 0x00, 0x00, 0x05, 0x55, 0x55, 0x55, 0xaa, 0x55, 0xff, 0xaf, 0x55, 0xa0, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xa5, 0x5a, 0x5a, 0x55, 0xff, 0x5f, 0xa5, 0x50, 0x00, 0x00, 0x00, 0x00, 0xff, 0x5a, 0x55, 0x5a, 0x5a, 0x55, 0xff, 0xf5, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x5a, 0x55, 0x55, 0x55, 0xa5, 0xaa, 0x5f, 0xa0, 0x00, 0x00, 0x00, 0x0f, 0x0a, 0x00, 0x55, 0xaf, 0x00, 0x0a, 0xf5, 0x5a, 0xff, 0x00, 0x00, 0x00, 0xf0, 0x0f, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x0f, 0xaa, 0x0f, 0xf0, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0xf0, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x0f, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x0f, 0x00, 0x00, 0x00, 0xf0, 0x0f, 0xf0, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00, 0xf0, 0x00, 0xf0, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0xaa, 0x0f, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0xaf, 0xa0, 0x0a, 0xfa, 0xff, 0xa0, 0xff, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xa0, 0x0a, 0xfa, 0xaa, 0xff, 0xaa, 0xaf, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xaf, 0xfa, 0xaf, 0xa0, 0xa5, 0xaf, 0xfa, 0xaa, 0x0f, 0xf0, 0x00, 0x00, 0x00, 0xaf, 0xff, 0xa5, 0x50, 0x50, 0xaa, 0xaa, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x0a, 0xaf, 0xfa, 0x05, 0x05, 0x50, 0x00, 0xaf, 0xfa, 0x00, 0x00, 0x00, 0x00, 0x0a, 0xfa, 0x55, 0x05, 0x55, 0x05, 0xaf, 0xaa, 0xaa, 0x00, 0x00, 0x00, 0x00, 0xaf, 0xff, 0xa5, 0x50, 0x55, 0x5a, 0xff, 0xff, 0xa0, 0x00, 0x00, 0xff, 0xff, 0xff, 0xfa, 0x05, 0x55, 0x55, 0x50, 0xaf, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x0a, 0xaa, 0x50, 0x55, 0x55, 0x55, 0xaa, 0xff, 0xff, 0xff, 0xf0, 0x00, 0x00, 0x0f, 0xfa, 0x50, 0x05, 0x55, 0x05, 0xaf, 0xff, 0xaa, 0x00, 0x00, 0x00, 0x00, 0xaf, 0xaa, 0x5a, 0xa5, 0x5a, 0x50, 0xaa, 0xaf, 0xff, 0x00, 0x00, 0x0f, 0xff, 0x00, 0xaf, 0xfa, 0xa0, 0x5a, 0xaa, 0xaf, 0xff, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0xff, 0xa0, 0xf0, 0x5a, 0xfa, 0xaa, 0xff, 0xa0, 0x0f, 0x00, 0x00, 0x00, 0x0f, 0xfa, 0x00, 0xf0, 0x5a, 0xfa, 0x00, 0x0f, 0xfa, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0xfa, 0x0a, 0xf0, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x0f, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x0f, 0x00, 0x00, 0xf0, 0x00, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f},
	{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
};

unsigned char g_bulletSprite[2] = { 0xFF, 0xFF };

EnemyR g_enemies[MAX_ENEMIES];
BulletR g_enemyBullets[MAX_ENEMY_BULLETS];
BulletR g_playerBullets[MAX_PLAYER_BULLETS];
PlayerR g_player;

void GraphicsUpdate(void) {
	if (HWREGBITW(&g_flags, FLAG_BUFFER_READY) == 1) {
		GPIO_PORTG_DATA_R ^= 0x04;
		RIT128x96x4ImageDraw(g_frame, 0, 0, 128, 96);
		ClearScreen();
		HWREGBITW(&g_flags, FLAG_BUFFER_READY) = 0;
	}
}

void GameUpdate(void) {
	int i;
	switch(g_player.stat) {
		case P_ALIVE:
			if ((GPIO_PORTG_DATA_R&0x20) == 0) {
					g_player.xpos--;
			} else if ((GPIO_PORTG_DATA_R&0x40) == 0) {
					g_player.xpos++;
			}
			if (HWREGBITW(&g_flags, FLAG_BUTTON_SELECT)) {
				for (i = 0; i < MAX_PLAYER_BULLETS; i++) {
					if (g_playerBullets[i].stat == B_DEAD) {
						g_playerBullets[i].stat = B_ALIVE;
						g_playerBullets[i].xpos = g_player.xpos+g_player.width/2-2;
						g_playerBullets[i].ypos = g_player.ypos - 2;
						g_soundArray = g_soundShot;
						g_soundIndex = 0;
						g_soundMax = SND_BULLET_LENGTH;
						break;
					}
				}
			}
			break;
		case P_HIT:
			g_player.animationStep = 0;
			break;
		case P_DEAD:
			break;
	}
	for (i = 0; i < MAX_ENEMIES; i++) {
		// enemy code
	}
	for (i = 0; i < MAX_ENEMY_BULLETS; i++) {
		if (g_enemyBullets[i].stat == B_ALIVE) {
				g_enemyBullets[i].ypos+=2;
				if (g_enemyBullets[i].ypos >= 96) {
					g_enemyBullets[i].stat = B_DEAD;
				}
				// collision detections
		}
	}
	for (i = 0; i < MAX_PLAYER_BULLETS; i++) {
		if (g_playerBullets[i].stat == B_ALIVE) {
			g_playerBullets[i].ypos-=2;
			if (g_playerBullets[i].ypos >= 96) {
				g_playerBullets[i].stat = B_DEAD;
			}
			// collision detections
		}
	}
	HWREGBITW(&g_flags, FLAG_BUTTON_SELECT) = 0;
}

void GameInit(void) {
	int x,y;
	for (y = 0; y < 3; y++) {
		for (x = 0; x < 4; x++) {
			g_enemies[y*4+x].xpos0 = x*20+24;
			g_enemies[y*4+x].ypos0 = y*12+8;
			g_enemies[y*4+x].xpos = x*20+24;
			g_enemies[y*4+x].ypos = y*12+8;
			g_enemies[y*4+x].width = 10;
			g_enemies[y*4+x].height = 10;
			g_enemies[y*4+x].direction = 0;
			g_enemies[y*4+x].animationStep = 0;
			g_enemies[y*4+x].health = 1;
			g_enemies[y*4+x].stat = E_ALIVE;
		}
	}
	for (y = 0; y < MAX_PLAYER_BULLETS; y++) {
		g_playerBullets[y].xpos = 0;
		g_playerBullets[y].ypos = 0;
		g_playerBullets[y].stat = B_DEAD;
	}
	for (y = 0; y < MAX_ENEMY_BULLETS; y++) {
		g_enemyBullets[y].xpos = 0;
		g_enemyBullets[y].ypos = 0;
		g_enemyBullets[y].stat = B_DEAD;
	}
	g_player.xpos = 128/2-12/2;
	g_player.ypos = 96-14-4;
	g_player.width = 12;
	g_player.height = 12;
	g_player.direction = 0;
	g_player.animationStep = 0;
	g_player.shield = 0;
	g_player.health = 2;
	g_player.stat = P_ALIVE;
	Timer0AInit(*GraphicsUpdate, 1000000/30);
	Timer1AInit(*GameUpdate, 1000000/100);
}

